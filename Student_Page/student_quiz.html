<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz - GMCI Session 3</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: Arial, sans-serif;
    }
    
    body {
      background-color: #f0f2f5;
      color: #333;
      min-height: 100vh;
    }
    
    .topbar {
      background-color: #2c3e50;
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .quiz-title {
      font-size: 18px;
      font-weight: bold;
    }
    
    .back-btn {
      background-color: #3498db;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .back-btn:hover {
      background-color: #2980b9;
    }
    
    .main-container {
      display: flex;
      max-width: 1200px;
      margin: 20px auto;
      padding: 0 20px 80px;
      gap: 20px;
    }
    
    .quiz-column {
      flex: 2;
    }
    
    .controls-column {
      flex: 1;
    }
    
    .box {
      background-color: white;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      border: 1px solid #ddd;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    
    .box-title {
      color: #2c3e50;
      font-size: 18px;
      margin-bottom: 15px;
      border-bottom: 1px solid #ecf0f1;
      padding-bottom: 8px;
    }
    
    .quiz-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .quiz-status {
      display: flex;
      justify-content: space-around;
      padding: 15px;
      background-color: #f8f9fa;
      border-radius: 6px;
      margin-bottom: 20px;
      border: 1px solid #ddd;
    }
    
    .status-item {
      text-align: center;
    }
    
    .status-count {
      font-size: 24px;
      font-weight: bold;
      color: #2c3e50;
      font-family: monospace;
    }
    
    .status-label {
      font-size: 14px;
      color: #7f8c8d;
    }
    
    .timer-count {
      color: #2c3e50;
    }
    
    .timer-count.warning {
      color: #f39c12;
    }
    
    .timer-count.critical {
      color: #e74c3c;
      animation: pulse 1s infinite;
    }
    
    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.7; }
      100% { opacity: 1; }
    }
    
    .questions-list {
      max-height: 500px;
      overflow-y: auto;
      margin-bottom: 20px;
    }
    
    .question {
      padding: 15px;
      margin-bottom: 15px;
      background-color: #f8f9fa;
      border-radius: 4px;
      border: 1px solid #ddd;
      transition: all 0.2s;
    }

    .question.answered {
      border-left: 4px solid #3498db;
      background-color: #e8f4fc;
    }
    
    .question-header {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .question-text {
      flex: 1;
      font-size: 16px;
      line-height: 1.5;
    }
    
    .true-false-options {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
      margin-top: 10px;
    }
    
    .true-false-btn {
      padding: 10px 20px;
      border: 2px solid #ddd;
      background-color: white;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      min-width: 80px;
      transition: all 0.2s;
    }

    .true-false-btn:hover {
      background-color: #f8f9fa;
    }
    
    .true-btn {
      color: #27ae60;
    }
    
    .false-btn {
      color: #e74c3c;
    }
    
    .true-false-btn.selected {
      color: white;
    }
    
    .true-btn.selected {
      background-color: #27ae60;
      border-color: #27ae60;
    }
    
    .false-btn.selected {
      background-color: #e74c3c;
      border-color: #e74c3c;
    }
    
    .submit-container {
      text-align: center;
      padding-top: 20px;
      border-top: 1px solid #ddd;
    }
    
    .submit-btn {
      background-color: #27ae60;
      color: white;
      border: none;
      padding: 15px 40px;
      border-radius: 6px;
      font-size: 18px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .submit-btn:hover:not(:disabled) {
      background-color: #219653;
    }
    
    .submit-btn:disabled {
      background-color: #bdc3c7;
      cursor: not-allowed;
    }
    
    .understanding-slider {
      width: 100%;
      margin: 15px 0;
    }
    
    .understanding-labels {
      display: flex;
      justify-content: space-between;
      color: #7f8c8d;
      font-size: 14px;
      margin-top: 5px;
    }
    
    .current-level {
      text-align: center;
      margin-top: 10px;
      font-weight: bold;
      color: #2c3e50;
    }
    
    .rate-buttons {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 15px;
    }
    
    .rate-btn {
      padding: 10px;
      border: 2px solid #ddd;
      background-color: white;
      border-radius: 6px;
      cursor: pointer;
      text-align: left;
      transition: all 0.2s;
    }

    .rate-btn:hover {
      background-color: #f8f9fa;
    }
    
    .rate-btn.active {
      background-color: #27ae60;
      color: white;
      border-color: #27ae60;
    }
    
    .action-buttons {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .action-btn {
      padding: 12px;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      color: white;
      text-align: center;
      transition: all 0.2s;
    }
    
    .emoji-btn {
      background-color: #64748b;
    }

    .emoji-btn:hover {
      background-color: #475569;
    }
    
    .emoji-box {
      display: none;
      padding: 15px;
      background-color: #f8f9fa;
      border-radius: 6px;
      margin-top: 15px;
      border: 1px solid #ddd;
    }
    
    .emoji-box.show {
      display: block;
    }
    
    .emoji-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin-top: 10px;
    }
    
    .emoji {
      padding: 10px;
      border: 1px solid #ddd;
      background-color: white;
      border-radius: 6px;
      font-size: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
    }

    .emoji:hover {
      background-color: #e8f4fc;
      transform: scale(1.1);
    }

    .question-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: white;
      padding: 15px 20px;
      border-top: 1px solid #ddd;
      display: flex;
      gap: 10px;
      align-items: center;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
    }
    
    .question-input {
      flex: 1;
      padding: 10px 15px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
    }

    .question-input:focus {
      outline: none;
      border-color: #3498db;
    }
    
    .send-btn, .confusion-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
      color: white;
      transition: all 0.2s;
    }
    
    .send-btn {
      background-color: #27ae60;
    }

    .send-btn:hover {
      background-color: #219653;
    }

    .send-btn:disabled {
      background-color: #bdc3c7;
      cursor: not-allowed;
    }
    
    .confusion-btn {
      background-color: #e67e22;
    }

    .confusion-btn:hover {
      background-color: #d35400;
    }

    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #27ae60;
      color: white;
      padding: 15px 20px;
      border-radius: 5px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      z-index: 2000;
      display: none;
    }

    .notification.show {
      display: block;
      animation: slideIn 0.3s ease-out;
    }

    .notification.error {
      background-color: #e74c3c;
    }

    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    .results-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .results-modal.active {
      display: flex;
    }

    .results-content {
      background-color: white;
      padding: 40px;
      border-radius: 10px;
      max-width: 500px;
      width: 90%;
      text-align: center;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }

    .results-content h2 {
      color: #2c3e50;
      margin-bottom: 20px;
    }

    .score-display {
      font-size: 48px;
      font-weight: bold;
      color: #27ae60;
      margin: 20px 0;
    }

    .score-display.poor {
      color: #e74c3c;
    }

    .score-display.average {
      color: #f39c12;
    }

    .results-buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 30px;
    }

    .results-btn {
      padding: 12px 25px;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .close-btn {
      background-color: #3498db;
      color: white;
    }

    .close-btn:hover {
      background-color: #2980b9;
    }
    
    @media (max-width: 768px) {
      .main-container {
        flex-direction: column;
      }
      
      .quiz-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      .true-false-options {
        justify-content: flex-start;
      }
      
      .quiz-status {
        flex-direction: column;
        gap: 15px;
      }
    }
  </style>
</head>
<body>

<div class="notification" id="notification"></div>

<div class="topbar">
  <div class="quiz-title">GMCI Session 3 - True/False Quiz</div>
  <button class="back-btn" id="back-btn">‚Üê Back to Session</button>
</div>

<div class="main-container">
  <div class="quiz-column">
    <div class="box">
      <div class="quiz-header">
        <div>
          <div class="box-title">True/False Quiz</div>
          <div style="color: #7f8c8d; font-size: 14px;">
            Answer all questions below
          </div>
        </div>
      </div>
      
      <div class="quiz-status">
        <div class="status-item">
          <div class="status-count" id="answered-count">0</div>
          <div class="status-label">Answered</div>
        </div>
        <div class="status-item">
          <div class="status-count" id="total-count">5</div>
          <div class="status-label">Total Questions</div>
        </div>
        <div class="status-item">
          <div class="status-count timer-count" id="time-left">15:00</div>
          <div class="status-label">Time Left</div>
        </div>
      </div>
      
      <div class="questions-list" id="questions-list"></div>
      
      <div class="submit-container">
        <button class="submit-btn" id="submit-btn" disabled>Submit Quiz</button>
      </div>
    </div>
  </div>
  
  <div class="controls-column">
    <div class="box">
      <div class="box-title">Understanding Level</div>
      <p style="color: #7f8c8d; margin-bottom: 10px; font-size: 14px;">
        How well do you understand the current topic?
      </p>
      
      <input type="range" min="1" max="5" value="3" class="understanding-slider" id="understanding-slider">
      
      <div class="understanding-labels">
        <span>Confused</span>
        <span>Basic</span>
        <span>Good</span>
        <span>Very Good</span>
        <span>Excellent</span>
      </div>
      
      <div class="current-level" id="current-level">Current: Good (3/5)</div>
    </div>
    
    <div class="box">
      <div class="box-title">Speech Rate</div>
      <p style="color: #7f8c8d; margin-bottom: 10px; font-size: 14px;">
        How is the instructor's speaking pace?
      </p>
      
      <div class="rate-buttons">
        <button class="rate-btn" data-rate="slow">Too Slow</button>
        <button class="rate-btn active" data-rate="ok">Just Right</button>
        <button class="rate-btn" data-rate="fast">Too Fast</button>
      </div>
    </div>
    
    <div class="box">
      <div class="action-buttons">
        <button class="action-btn emoji-btn" id="emoji-toggle-btn">Show Emojis</button>
      </div>
      
      <div class="emoji-box" id="emoji-box">
        <div style="color: #7f8c8d; margin-bottom: 10px; font-size: 14px;">
          Click to send feedback:
        </div>
        <div class="emoji-grid">
          <div class="emoji">üòÄ</div>
          <div class="emoji">üòê</div>
          <div class="emoji">üòï</div>
          <div class="emoji">üòÉ</div>
          <div class="emoji">üëç</div>
          <div class="emoji">üëé</div>
          <div class="emoji">ü§î</div>
          <div class="emoji">üò¥</div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="question-bar">
  <input type="text" class="question-input" id="question-input" placeholder="Type a question or comment...">
  <button class="send-btn" id="send-btn" disabled>Send</button>
  <button class="confusion-btn" id="confusion-btn">üòï I'm Confused</button>
</div>

<div class="results-modal" id="results-modal">
  <div class="results-content">
    <h2>Quiz Results</h2>
    <div class="score-display" id="score-display">0/5</div>
    <p style="color: #7f8c8d; font-size: 18px;" id="percentage-display">0%</p>
    <p style="margin-top: 20px; color: #7f8c8d;" id="result-message">Your answers have been submitted.</p>
    <div class="results-buttons">
      <button class="results-btn close-btn" id="close-results-btn">Close</button>
    </div>
  </div>
</div>

<script>
  const quizQuestions = [
    {
      id: 1,
      text: "1. HCI stands for Human-Computer Interaction.",
      correctAnswer: "true",
      userAnswer: null
    },
    {
      id: 2,
      text: "2. Usability testing should only be done at the end of development.",
      correctAnswer: "false",
      userAnswer: null
    },
    {
      id: 3,
      text: "3. User personas represent real, specific individuals.",
      correctAnswer: "false",
      userAnswer: null
    },
    {
      id: 4,
      text: "4. Wireframes are low-fidelity representations of a design.",
      correctAnswer: "true",
      userAnswer: null
    },
    {
      id: 5,
      text: "5. Accessibility is only important for users with disabilities.",
      correctAnswer: "false",
      userAnswer: null
    }
  ];
  
  let timeLeft = 15 * 60;
  let timerInterval;
  let quizSubmitted = false;

  function loadQuiz() {
    const saved = localStorage.getItem('quizProgress');
    if (saved) {
      const progress = JSON.parse(saved);
      quizQuestions.forEach((q, i) => {
        if (progress[i]) {
          q.userAnswer = progress[i];
        }
      });
    }
    renderQuestions();
  }

  function saveQuizProgress() {
    const progress = quizQuestions.map(q => q.userAnswer);
    localStorage.setItem('quizProgress', JSON.stringify(progress));
  }

  function renderQuestions() {
    const questionsList = document.getElementById('questions-list');
    questionsList.innerHTML = '';
    
    let answeredCount = 0;
    
    quizQuestions.forEach(question => {
      if (question.userAnswer !== null) answeredCount++;
      
      const questionEl = document.createElement('div');
      questionEl.className = `question ${question.userAnswer !== null ? 'answered' : ''}`;
      questionEl.innerHTML = `
        <div class="question-header">
          <div class="question-text">${question.text}</div>
        </div>
        <div class="true-false-options">
          <button class="true-false-btn true-btn ${question.userAnswer === 'true' ? 'selected' : ''}" 
                  data-id="${question.id}" data-answer="true">
            True
          </button>
          <button class="true-false-btn false-btn ${question.userAnswer === 'false' ? 'selected' : ''}" 
                  data-id="${question.id}" data-answer="false">
            False
          </button>
        </div>
      `;
      questionsList.appendChild(questionEl);
    });
    
    document.getElementById('answered-count').textContent = answeredCount;
    document.getElementById('total-count').textContent = quizQuestions.length;
    
    const submitBtn = document.getElementById('submit-btn');
    submitBtn.disabled = answeredCount !== quizQuestions.length || quizSubmitted;
    
    document.querySelectorAll('.true-false-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        if (quizSubmitted) return;
        const questionId = parseInt(this.getAttribute('data-id'));
        const answer = this.getAttribute('data-answer');
        selectAnswer(questionId, answer);
      });
    });
  }

  function selectAnswer(questionId, answer) {
    const question = quizQuestions.find(q => q.id === questionId);
    if (!question || quizSubmitted) return;
    
    question.userAnswer = answer;
    saveQuizProgress();
    renderQuestions();
  }

  function startTimer() {
    clearInterval(timerInterval);
    
    timerInterval = setInterval(() => {
      if (quizSubmitted) {
        clearInterval(timerInterval);
        return;
      }
      
      timeLeft--;
      updateTimerDisplay();
      
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        showNotification('Time is up! Submitting quiz...', true);
        setTimeout(() => submitQuiz(), 1000);
      }
    }, 1000);
  }

  function updateTimerDisplay() {
    const minutes = Math.floor(timeLeft / 60);
    const seconds = timeLeft % 60;
    
    const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    
    const timerElement = document.getElementById('time-left');
    timerElement.textContent = timeString;
    
    timerElement.className = 'status-count timer-count';
    
    if (timeLeft <= 60) {
      timerElement.classList.add('critical');
    } else if (timeLeft <= 300) {
      timerElement.classList.add('warning');
    }
  }

  function submitQuiz() {
    if (quizSubmitted) return;
    
    clearInterval(timerInterval);
    quizSubmitted = true;
    
    let score = 0;
    quizQuestions.forEach(question => {
      if (question.userAnswer === question.correctAnswer) {
        score++;
      }
    });
    
    const percentage = Math.round((score / quizQuestions.length) * 100);
    
    const result = {
      score: score,
      total: quizQuestions.length,
      percentage: percentage,
      timestamp: new Date().toISOString()
    };
    
    localStorage.setItem('quizResult', JSON.stringify(result));
    localStorage.removeItem('quizProgress');
    
    showResults(score, percentage);
  }

  function showResults(score, percentage) {
    const scoreEl = document.getElementById('score-display');
    scoreEl.textContent = `${score}/${quizQuestions.length}`;
    
    if (percentage < 50) {
      scoreEl.className = 'score-display poor';
    } else if (percentage < 80) {
      scoreEl.className = 'score-display average';
    } else {
      scoreEl.className = 'score-display';
    }
    
    document.getElementById('percentage-display').textContent = `${percentage}%`;
    
    let message = '';
    if (percentage >= 80) {
      message = 'Excellent work! You have a strong understanding of the material.';
    } else if (percentage >= 60) {
      message = 'Good job! Review the material to improve your understanding.';
    } else {
      message = 'Keep studying! Review the lecture materials and try again.';
    }
    
    document.getElementById('result-message').textContent = message;
    document.getElementById('results-modal').classList.add('active');
    
    document.getElementById('submit-btn').disabled = true;
    document.getElementById('submit-btn').textContent = 'Submitted';
  }

  function showNotification(message, isError = false) {
    const notif = document.getElementById('notification');
    notif.textContent = message;
    notif.className = 'notification show';
    if (isError) notif.classList.add('error');
    
    setTimeout(() => {
      notif.classList.remove('show');
    }, 3000);
  }

  document.getElementById('understanding-slider').addEventListener('input', function() {
    const value = parseInt(this.value);
    const levels = ['Confused', 'Basic', 'Good', 'Very Good', 'Excellent'];
    document.getElementById('current-level').textContent = `Current: ${levels[value-1]} (${value}/5)`;
  });

  document.querySelectorAll('.rate-btn').forEach(button => {
    button.addEventListener('click', function() {
      document.querySelectorAll('.rate-btn').forEach(btn => btn.classList.remove('active'));
      this.classList.add('active');
    });
  });

  document.getElementById('emoji-toggle-btn').addEventListener('click', function() {
    const emojiBox = document.getElementById('emoji-box');
    const isVisible = emojiBox.classList.contains('show');
    
    if (isVisible) {
      emojiBox.classList.remove('show');
      this.textContent = 'Show Emojis';
    } else {
      emojiBox.classList.add('show');
      this.textContent = 'Hide Emojis';
    }
  });

  document.querySelectorAll('.emoji').forEach(emoji => {
    emoji.addEventListener('click', function() {
      showNotification(`${this.textContent} feedback sent to instructor`);
    });
  });

  document.getElementById('question-input').addEventListener('input', function() {
    document.getElementById('send-btn').disabled = !this.value.trim();
  });

  document.getElementById('send-btn').addEventListener('click', function() {
    const question = document.getElementById('question-input').value.trim();
    
    if (question) {
      showNotification('Question sent to instructor');
      document.getElementById('question-input').value = '';
    }
  });

  document.getElementById('confusion-btn').addEventListener('click', function() {
    showNotification('Instructor notified that you are confused');
  });

  document.getElementById('submit-btn').addEventListener('click', submitQuiz);

  document.getElementById('close-results-btn').addEventListener('click', function() {
    window.location.href = 'student_session.html';
  });

  document.getElementById('back-btn').addEventListener('click', function() {
    if (!quizSubmitted && confirm('Are you sure you want to leave? Your progress will be saved.')) {
      window.location.href = 'student_session.html';
    } else if (quizSubmitted) {
      window.location.href = 'student_session.html';
    }
  });

  document.getElementById('question-input').addEventListener('keypress', function(e) {
    if (e.key === 'Enter' && this.value.trim()) {
      document.getElementById('send-btn').click();
    }
  });

  loadQuiz();
  startTimer();
</script>

</body>
</html>